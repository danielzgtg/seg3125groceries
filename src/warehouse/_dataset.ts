/*
 * Dataset generated by:
 * 1. Getting images from Unsplash
 * 2. Manually labeling them
 * 3. Randomly setting prices
 */

import * as pics from './_images';
import type { Merchandise } from '../models';

/**
 * Helper to add produce that would be found at a farmer's market.
 */
function addProduce(
    db: {[id: string]: Merchandise},
    id: string, displayName: string, imageURL: string, cents: number,
) {
    const realCents = cents % 100;
    /*
     * Arbitrarily put the organic label on any food with a unit price that:
     * - Isn't dirt cheap
     * - Isn't a whole dollar amount
     * - Doesn't involve pennies or nickels
     */
    const organic = !(cents <= 100 || !realCents || realCents % 10);
    db[id] = {
        displayName,
        cents,
        imageURL,
        vegetarian: true,
        organic,
        glutenFree: true,
    };
}

/**
 * Helper to add meat.
 */
function addMeat(
    db: {[id: string]: Merchandise},
    id: string, displayName: string, imageURL: string, cents: number, organic: boolean,
) {
    db[id] = {
        displayName,
        cents,
        imageURL,
        organic,
        glutenFree: true,
    };
}

/**
 * Simulates the server responding with the product listings.
 */
export default function load(db: {[id: string]: Merchandise}): void {
    addProduce(db, 'leek', 'Leeks', pics.leeks, 30);
    addProduce(db, 'carrot', 'Carrots', pics.carrots, 50);
    db.chickenSoup = {
        displayName: 'Chicken Noodle Soup',
        cents: 600,
        imageURL: pics.chickenSoup,
    };
    addProduce(db, 'broccoli', 'Broccoli', pics.broccoli, 300);
    addProduce(db, 'lemon', 'Lemons', pics.lemons, 220);
    addProduce(db, 'corn', 'Corn Cobs', pics.corn, 100);
    db.pizza = {
        displayName: 'Pizza',
        cents: 1500,
        imageURL: pics.pizza,
    };
    addProduce(db, 'banana', 'Banana', pics.banana, 90);
    addProduce(db, 'pineapple', 'Pineapple', pics.pineapple, 400);
    addProduce(db, 'apple', 'Apple', pics.apple, 100);
    addProduce(db, 'macaron', 'Macarons', pics.macaron, 700);
    db.meatball = {
        displayName: 'Meatballs',
        cents: 1500,
        imageURL: pics.meatballs,
        organic: true,
        glutenFree: true,
    };
    addProduce(db, 'strawberry', 'Strawberries', pics.strawberries, 10);
    addProduce(db, 'orange', 'Oranges', pics.oranges, 100);
    addProduce(db, 'citrus', 'Assorted Citrus', pics.citrus, 120);
    addProduce(db, 'avocado', 'Avocado', pics.avocado, 200);
    addProduce(db, 'icecream', 'Strawberry Ice Cream', pics.icecream, 400);
    addProduce(db, 'popcorn', 'Bucket of Popcorn', pics.popcorn, 800);
    addProduce(db, 'blueberry', 'Blueberry', pics.blueberries, 5);
    addProduce(db, 'raspberry', 'Raspberries', pics.raspberries, 400);
    db.pancake = {
        displayName: 'Pancakes',
        cents: 70,
        imageURL: pics.pancakes,
        vegetarian: true,
        organic: true,
    };
    addMeat(db, 'steak', 'Steak', pics.steak, 2100, false);
    addMeat(db, 'salmon', 'Salmon', pics.salmon, 1700, false);
    addMeat(db, 'tuna', 'Tuna', pics.tuna, 1800, false);
    addProduce(db, 'potato', 'Potatoes', pics.potatoes, 30);
    db.doughnut = {
        displayName: 'Doughnuts',
        cents: 100,
        imageURL: pics.doughnuts,
        vegetarian: true,
        organic: true,
    };
    db.bread = {
        displayName: 'Loaf of Bread',
        cents: 600,
        imageURL: pics.bread,
        vegetarian: true,
    };
    addProduce(db, 'cauliflower', 'Cauliflower', pics.cauliflower, 200);
    addProduce(db, 'chocolate', 'Cup of Chocolate', pics.chocolate, 199);
    addProduce(db, 'pear', 'Pears', pics.pears, 100);
    db.eggs = {
        displayName: 'Eggs',
        cents: 80,
        imageURL: pics.eggs,
        organic: true,
        glutenFree: true,
    };
    addProduce(db, 'almond', 'Cup of Almonds', pics.almonds, 160);
}
